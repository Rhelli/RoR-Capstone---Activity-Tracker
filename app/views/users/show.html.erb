<main class="profile-container w-100 h-100 p-3 m-0">
  <div class="w-100 profile-top-section mx-0 px-2 d-flex flex-row">
    <aside class="profile-column d-flex flex-column justify-content-center align-items-center mr-1">
      <%= gravatar_for(current_user) %>
      <h1 class="profile-name mt-2"><%= full_name %></h1>
      <p class="profile-join">Joined on <%= current_user.created_at.strftime('%B %e %Y') %></p>
    </aside>
    <div class="d-flex flex-column main-column">
      <ul class="float-right profile-quicklinks my-0 d-flex align-items-center">
        <li class="d-inline"><%= link_to 'Recent Activities', activity_entries_show_path(@user) %></li>
        <li class="d-inline"><%= link_to 'My Friends', '#' %></li>
        <li class="d-inline"><%= link_to 'My Stats', '#' %></li>
      </ul>
      <div class="profile-quick-stats d-flex flex-row">
        <div class="profile-activity-counter d-flex justify-content-start align-items-center flex-column mr-1">
          <p class="mb-0 activity-count"><%= @recent_activities_all.count %></p>
          <p class="mt-3 font-weight-bold">Activities in the last 4 weeks</p>
          <div class="quick-stats-weekly-overview w-100 d-flex">
            <div class="quick-stats-weeks">
              <div>
                <p><%= (Date.today - 7).strftime('%B %e') %></p>
              </div>
              <div>
                <p><%= (Date.today - 14).strftime('%B %e') %></p>
              </div>
              <div>
                <p><%= (Date.today - 21).strftime('%B %e') %></p>
              </div>
              <div>
                <p><%= (Date.today - 28).strftime('%B %e') %></p>
              </div>
            </div>
            <div class="quick-stats-dots">
              <div>
                <p class="d-flex justify-content-start align-items-start h-100">
                  <%= quick_stats_dots(@recent_activities_7.count)%>
                </p>
              </div>
              <div>
                <p class="d-flex justify-content-start align-items-start h-100">
                  <%= quick_stats_dots(@recent_activities_14.count)%>
                </p>
              </div>
              <div>
                <p class="d-flex justify-content-start align-items-start h-100">
                  <%= quick_stats_dots(@recent_activities_21.count)%>
                </p>
              </div>
              <div>
                <p class="d-flex justify-content-start align-items-start h-100">
                  <%= quick_stats_dots(@recent_activities_28.count)%>
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="profile-widget ml-3">
          <div>
            <div class="profile-widget-activity d-flex justify-content-center align-items-center flex-column pt-1 pr-0">
              <h2 class="mr-auto ml-3">Most Recent Activities</h2>
              <ul class="list-unstyled pt-2 w-100 mb-0 pb-0 px-1">
                <% @recent_activities_all.limit(5).each do |activity| %>
                  <li>
                    <div class="my-group-name">
                      <div class="profile-widget-group-name mb-2">
                        <p class="d-inline-block mb-0 recent-activity-name">
                          <%= link_to "#{activity.name}", activities_show_path(activity) %>
                        </p>
                        <p class="d-inline-block mb-0"> • <%= activity.calories %> cals</p>
                        <p class="d-inline-block mb-0"> • <%= time_converter(activity.amount) %></p>
                        <p class="d-inline-block mb-0"> • <%= time_ago_in_words(activity.created_at) %> ago</p>
                      </div>
                    </div>
                  </li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="profile-bottom-section w-100 mx-0 d-flex flex-row">
    <div class="profile-activities-list h-100 w-50">
      <h2 class="pl-4 pt-2 mb-1">All Activities</h2>
      <ul class="list-unstyled all-activities-list p-2">
        <% @all_activities.each do |activity| %>
          <li class="d-table">
            <div class='h-100 w-auto all-activities-item mb-3'>
              <p class='d-inline-block mb-0 mr-1 w-auto'><i class="<%= activity.group_icon %>"></i></p>
              <p class='d-inline-block mb-0 w-auto'><%= link_to "#{activity.name}", activities_show_path(activity) %> • </p>
              <p class='d-inline-block mb-0 w-auto'><%= activity.created_at.strftime('%B %e') %></p>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
    <div class="profile-group-list h-100 w-50 px-1">
    <h2 class="pl-4 pt-2 mb-1">My Groups</h2>
      <ul class="list-unstyled my-groups-list px-1">
        <% @my_groups.each do |m| %>
          <li class="d-inline-block">
            <div class="my-group-name mb-2 d-flex align-items-center">
              <div class="d-inline-block profile-widget-icon">
                <i class="<%= m.icon %>"></i>
              </div>
              <div class="d-inline-block mb-0 profile-widget-group-name">
                <p class="mb-0"><%= m.name %></p>
              </div>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</main>